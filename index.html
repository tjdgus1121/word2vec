<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ëë§ì‡ê¸°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Noto+Sans+KR:wght@500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Do Hyeon', sans-serif;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        .container {
            max-width: 1150px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            padding-bottom: 0;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            z-index: 1;
            color: #333;
        }

        h1 {
            font-family: 'Do Hyeon', sans-serif;
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 3.5em;
            font-weight: normal;
            letter-spacing: 2px;
        }

        /* ê²Œì„ ì˜ì—­ */
        .game-container {
            display: block;
        }

        .info-box {
            background: #e8f4f8;
            border-left: 4px solid #4a6fa5;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .info-box h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-family: 'Do Hyeon', sans-serif;
        }

        .info-box p {
            color: #555;
            line-height: 1.6;
            margin: 5px 0;
            font-size: 1.02em;
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: 500;
        }

        /* íƒ€ì´ë¨¸ */
        .timer-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }

        .timer-box.warning {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            animation: pulse 1s ease-in-out infinite;
        }

        .timer-label {
            font-size: 1.2em;
            opacity: 0.95;
            margin-bottom: 8px;
        }

        .timer-value {
            font-size: 4em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .current-word {
            text-align: center;
            margin: 30px 0;
        }

        .current-word h2 {
            color: #555;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .word-display {
            font-size: 3.5em;
            color: #4facfe;
            text-shadow: 2px 2px 4px rgba(79, 172, 254, 0.3);
            letter-spacing: 3px;
        }

        .input-area {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        input[type="text"] {
            flex: 1;
            padding: 15px 20px;
            font-size: 1.3em;
            border: 2px solid #ddd;
            background: white;
            color: #333;
            border-radius: 10px;
            transition: all 0.3s;
        }

        input[type="text"]::placeholder {
            color: #999;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        button {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Do Hyeon', sans-serif;
        }

        button.primary {
            background: linear-gradient(135deg, #3a506b, #5d6d7e);
            color: white;
        }

        button.primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #2c3e50, #4a5f7f);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(58, 80, 107, 0.3);
        }

        button.secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        button.secondary:hover:not(:disabled) {
            background: linear-gradient(135deg, #7f8c8d, #6c7a89);
            transform: translateY(-2px);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ê²°ê³¼ ë©”ì‹œì§€ */
        .result {
            display: none;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 10px;
            text-align: center;
            font-size: 1.1em;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .result.fail {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .similarity-score {
            font-size: 1.8em;
            font-weight: bold;
            margin-top: 8px;
        }

        /* ë‹¨ì–´ ì²´ì¸ */
        .word-chain-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .word-chain-container h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .chain-item {
            display: inline-block;
            background: white;
            padding: 10px 18px;
            margin: 5px;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .chain-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .chain-score {
            display: inline-block;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            margin-left: 8px;
        }

        /* í•˜ë‹¨ í†µê³„ */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-box {
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            font-size: 0.95em;
            color: #00695c;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 2.2em;
            color: #004d40;
            font-weight: bold;
        }

        /* ê²Œì„ ì˜¤ë²„ ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideUp 0.4s ease;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .final-score {
            font-size: 3.5em;
            color: #4facfe;
            font-weight: bold;
            margin: 20px 0;
        }

        .modal-stats {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: left;
        }

        .modal-stats p {
            margin: 10px 0;
            font-size: 1.1em;
            color: #555;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        /* ë¡œë”© */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4facfe;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            vertical-align: middle;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* í•˜ë‹¨ ì •ë³´ */
        .footer {
            background: #f8f9fa;
            padding: 20px;
            margin-top: 30px;
            border-radius: 0 0 20px 20px;
            margin-left: -40px;
            margin-right: -40px;
            margin-bottom: -40px;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        .footer a {
            color: #4facfe;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– AI ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ëë§ì‡ê¸°</h1>

        <div class="game-container" id="gameContainer">
            <div class="info-box">
                <h3>ğŸ“Œ ê²Œì„ ê·œì¹™</h3>
                <p><strong>ëª©í‘œ:</strong> 2ë¶„ ì•ˆì— í˜„ì¬ ë‹¨ì–´ì™€ ì˜ë¯¸ì ìœ¼ë¡œ ìœ ì‚¬í•œ ëª…ì‚¬ë¥¼ ì´ì–´ê°€ì„¸ìš”!</p>
                <p><strong>ìœ ì‚¬ë„:</strong> 30ì  ì´ìƒì´ë©´ ì„±ê³µ | ì½¤ë³´ë¡œ ì ìˆ˜ ë°°ìœ¨ ì¦ê°€</p>
                <p><strong>ì£¼ì˜:</strong> ëª…ì‚¬ë§Œ ì…ë ¥ ê°€ëŠ¥ (ë§ˆì°¨ O, ë§ˆì°¨ì˜ X)</p>
            </div>

            <!-- íƒ€ì´ë¨¸ -->
            <div class="timer-box" id="timerBox">
                <div class="timer-label">ë‚¨ì€ ì‹œê°„</div>
                <div class="timer-value" id="timeLeft">2:00</div>
            </div>

            <!-- í˜„ì¬ ë‹¨ì–´ -->
            <div class="current-word">
                <h2>í˜„ì¬ ë‹¨ì–´</h2>
                <div class="word-display" id="currentWord">í•™êµ</div>
            </div>

            <!-- ì…ë ¥ ì˜ì—­ -->
            <div class="input-area">
                <input type="text" id="wordInput" placeholder="ìœ ì‚¬í•œ ëª…ì‚¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
                <button class="primary" id="submitBtn" onclick="submitWord()">ì œì¶œ</button>
                <button class="secondary" onclick="changeWord()">ë‹¨ì–´ ë³€ê²½</button>
            </div>

            <!-- ê²°ê³¼ ë©”ì‹œì§€ -->
            <div class="result" id="result"></div>

            <!-- ë‹¨ì–´ ì²´ì¸ -->
            <div class="word-chain-container">
                <h3>ë‹¨ì–´ ì—°ê²° ê¸°ë¡</h3>
                <div id="wordChain">
                    <div class="chain-item">
                        <span>í•™êµ</span>
                        <span class="chain-score">ì‹œì‘</span>
                    </div>
                </div>
            </div>

            <!-- í†µê³„ -->
            <div class="stats-container">
                <div class="stat-box">
                    <div class="stat-label">ì´ ì ìˆ˜</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">ì—°ê²°ëœ ë‹¨ì–´</div>
                    <div class="stat-value" id="totalWords">1</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">ìµœëŒ€ ì½¤ë³´</div>
                    <div class="stat-value" id="combo">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">í‰ê·  ìœ ì‚¬ë„</div>
                    <div class="stat-value" id="avgSimilarity">0ì </div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">ìµœê³  ìœ ì‚¬ë„</div>
                    <div class="stat-value" id="highestSimilarity">0ì </div>
                </div>
            </div>
        </div>

        <!-- ê²Œì„ ì˜¤ë²„ ëª¨ë‹¬ -->
        <div class="modal" id="gameOverModal">
            <div class="modal-content">
                <h2>ğŸ† ê²Œì„ ì¢…ë£Œ!</h2>
                <div class="final-score" id="finalScore">0ì </div>
                <div class="modal-stats">
                    <p>ğŸ“Š <strong>ì—°ê²°ëœ ë‹¨ì–´:</strong> <span id="finalWords">0</span>ê°œ</p>
                    <p>ğŸ¯ <strong>í‰ê·  ìœ ì‚¬ë„:</strong> <span id="finalAvgSimilarity">0</span>ì </p>
                    <p>ğŸ”¥ <strong>ìµœëŒ€ ì½¤ë³´:</strong> <span id="finalCombo">0</span></p>
                </div>
                <div class="modal-buttons">
                    <button class="primary" onclick="newGame()">ë‹¤ì‹œ ì‹œì‘</button>
                    <button class="secondary" onclick="closeModal()">ë‹«ê¸°</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>ğŸ’¡ Gemini AIê°€ ë‹¨ì–´ì˜ ì˜ë¯¸ì  ìœ ì‚¬ë„ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤</p>
            <p>ì œì‘ì: <a href="mailto:tjdgus1121@naver.com">tjdgus1121@naver.com</a></p>
        </div>
    </div>

    <script>
        // =============================================
        // ì„¤ì •
        // =============================================
        
        // âœ… Cloudflare Worker URL ì„¤ì • ì™„ë£Œ
        const WORKER_URL = 'https://cosine.tjdgus1121.workers.dev';
        
        const GAME_TIME = 120; // 2ë¶„
        const SIMILARITY_THRESHOLD = 0.3; // 30ì 
        const COMBO_MULTIPLIER = 0.1; // ì½¤ë³´ ë‹¹ 10% ë³´ë„ˆìŠ¤
        
        // =============================================
        // ê²Œì„ ìƒíƒœ
        // =============================================
        
        let gameState = {
            currentWord: 'í•™êµ',
            score: 0,
            combo: 0,
            maxCombo: 0,
            usedWords: new Set(['í•™êµ']),
            wordChain: [{word: 'í•™êµ', similarity: null}],
            similarities: [],
            timeLeft: GAME_TIME
        };
        
        let isGameActive = false;
        let timerInterval = null;
        let resultTimeout = null;
        let isProcessing = false;
        
        // =============================================
        // API í˜¸ì¶œ
        // =============================================
        
        async function getSimilarity(word1, word2) {
            const response = await fetch(WORKER_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ word1, word2 })
            });
            
            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.error || 'API ìš”ì²­ ì‹¤íŒ¨');
            }
            
            return await response.json();
        }
        
        // =============================================
        // ê²Œì„ ë¡œì§
        // =============================================
        
        function initGame() {
            gameState = {
                currentWord: 'í•™êµ',
                score: 0,
                combo: 0,
                maxCombo: 0,
                usedWords: new Set(['í•™êµ']),
                wordChain: [{word: 'í•™êµ', similarity: null}],
                similarities: [],
                timeLeft: GAME_TIME
            };
            
            isGameActive = true;
            isProcessing = false;
            
            document.getElementById('wordInput').disabled = false;
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('wordInput').value = '';
            document.getElementById('wordInput').focus();
            
            updateDisplay();
            startTimer();
        }
        
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            const timerBox = document.getElementById('timerBox');
            
            timerInterval = setInterval(() => {
                gameState.timeLeft--;
                
                const minutes = Math.floor(gameState.timeLeft / 60);
                const seconds = gameState.timeLeft % 60;
                document.getElementById('timeLeft').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // 30ì´ˆ ë‚¨ì•˜ì„ ë•Œ ê²½ê³ 
                if (gameState.timeLeft === 30) {
                    timerBox.classList.add('warning');
                }
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endGame();
                }
            }, 1000);
        }
        
        async function submitWord() {
            if (!isGameActive || isProcessing) return;
            
            const input = document.getElementById('wordInput');
            const word = input.value.trim();
            
            if (!word) {
                showResult('ë‹¨ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!', false);
                return;
            }
            
            if (gameState.usedWords.has(word)) {
                showResult('ì´ë¯¸ ì‚¬ìš©í•œ ë‹¨ì–´ì…ë‹ˆë‹¤!', false);
                return;
            }
            
            isProcessing = true;
            document.getElementById('submitBtn').disabled = true;
            showResult('ğŸ¤– AIê°€ ìœ ì‚¬ë„ë¥¼ ê³„ì‚°í•˜ëŠ” ì¤‘...<div class="loading"></div>', true);
            
            try {
                const result = await getSimilarity(gameState.currentWord, word);
                
                // ëª…ì‚¬ ê²€ì¦
                if (!result.isNoun) {
                    showResult('âŒ ' + (result.message || 'ëª…ì‚¬ë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”!'), false);
                    isProcessing = false;
                    document.getElementById('submitBtn').disabled = false;
                    return;
                }
                
                const similarity = result.similarity;
                const similarityPercent = similarity * 100;
                
                if (similarity >= SIMILARITY_THRESHOLD) {
                    // ì„±ê³µ
                    const baseScore = Math.floor(similarityPercent);
                    const comboBonus = Math.floor(baseScore * gameState.combo * COMBO_MULTIPLIER);
                    const totalScore = baseScore + comboBonus;
                    
                    gameState.score += totalScore;
                    gameState.combo++;
                    
                    if (gameState.combo > gameState.maxCombo) {
                        gameState.maxCombo = gameState.combo;
                    }
                    
                    gameState.usedWords.add(word);
                    gameState.currentWord = word;
                    gameState.wordChain.push({word, similarity});
                    gameState.similarities.push(similarity);
                    
                    let qualityLabel = '';
                    if (similarityPercent >= 60) qualityLabel = 'ğŸ”¥ ì™„ë²½! ';
                    else if (similarityPercent >= 50) qualityLabel = 'ğŸ‘ ì¢‹ì•„ìš”! ';
                    else qualityLabel = 'âœ… í†µê³¼! ';
                    
                    showResult(
                        qualityLabel + `ìœ ì‚¬ë„ ${similarityPercent.toFixed(1)}ì  (+${totalScore}ì )` +
                        (comboBonus > 0 ? ` [ì½¤ë³´ x${gameState.combo}]` : ''),
                        true,
                        similarity
                    );
                    
                    updateDisplay();
                    input.value = '';
                    
                } else {
                    // ì‹¤íŒ¨
                    showResult(
                        `âŒ ìœ ì‚¬ë„ê°€ ë„ˆë¬´ ë‚®ìŠµë‹ˆë‹¤! (${similarityPercent.toFixed(1)}ì  < ${SIMILARITY_THRESHOLD * 100}ì )`,
                        false
                    );
                    gameState.combo = 0;
                    updateDisplay();
                    input.value = '';
                }
                
            } catch (error) {
                console.error('Error:', error);
                showResult('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, false);
            } finally {
                isProcessing = false;
                document.getElementById('submitBtn').disabled = false;
                document.getElementById('wordInput').focus();
            }
        }
        
        function showResult(message, isSuccess, similarity = null) {
            const resultDiv = document.getElementById('result');
            
            if (resultTimeout) {
                clearTimeout(resultTimeout);
                resultTimeout = null;
            }
            
            resultDiv.className = 'result ' + (isSuccess ? 'success' : 'fail');
            
            if (isSuccess && similarity !== null) {
                resultDiv.innerHTML = `
                    ${message}
                    <div class="similarity-score">${(similarity * 100).toFixed(1)}%</div>
                `;
            } else {
                resultDiv.innerHTML = message;
            }
            
            resultDiv.style.display = 'block';
            
            resultTimeout = setTimeout(() => {
                resultDiv.style.display = 'none';
                resultTimeout = null;
            }, 2000);
        }
        
        function updateDisplay() {
            document.getElementById('currentWord').textContent = gameState.currentWord;
            document.getElementById('score').textContent = gameState.score;
            
            const chainDiv = document.getElementById('wordChain');
            chainDiv.innerHTML = '';
            
            gameState.wordChain.forEach((item, index) => {
                const chainItem = document.createElement('div');
                chainItem.className = 'chain-item';
                
                const wordSpan = document.createElement('span');
                wordSpan.textContent = item.word;
                
                const scoreSpan = document.createElement('span');
                scoreSpan.className = 'chain-score';
                scoreSpan.textContent = index === 0 ? 'ì‹œì‘' : 
                    (item.similarity * 100).toFixed(0) + 'ì ';
                
                chainItem.appendChild(wordSpan);
                chainItem.appendChild(scoreSpan);
                chainDiv.appendChild(chainItem);
            });
            
            document.getElementById('totalWords').textContent = gameState.wordChain.length;
            document.getElementById('combo').textContent = gameState.maxCombo;
            
            if (gameState.similarities.length > 0) {
                const avg = gameState.similarities.reduce((a, b) => a + b) / gameState.similarities.length;
                const max = Math.max(...gameState.similarities);
                
                document.getElementById('avgSimilarity').textContent = 
                    (avg * 100).toFixed(0) + 'ì ';
                document.getElementById('highestSimilarity').textContent = 
                    (max * 100).toFixed(0) + 'ì ';
            }
        }
        
        function changeWord() {
            if (!isGameActive) return;
            
            const newWords = ['ì»´í“¨í„°', 'ì‚¬ê³¼', 'ë‚˜ë¬´', 'ë°”ë‹¤', 'í•˜ëŠ˜', 'ê½ƒ', 'ìŒì•…', 'ì±…'];
            const availableWords = newWords.filter(w => !gameState.usedWords.has(w));
            
            if (availableWords.length === 0) {
                showResult('ë” ì´ìƒ ë³€ê²½í•  ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤!', false);
                return;
            }
            
            const newWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            gameState.currentWord = newWord;
            gameState.usedWords.add(newWord);
            gameState.wordChain.push({word: newWord, similarity: null});
            gameState.combo = 0;
            
            showResult(`ìƒˆë¡œìš´ ë‹¨ì–´ë¡œ ë³€ê²½: "${newWord}"`, true);
            updateDisplay();
        }
        
        function endGame() {
            isGameActive = false;
            clearInterval(timerInterval);
            
            document.getElementById('wordInput').disabled = true;
            document.getElementById('submitBtn').disabled = true;
            
            const avgSimilarity = gameState.similarities.length > 0 
                ? (gameState.similarities.reduce((a, b) => a + b) / gameState.similarities.length * 100).toFixed(0)
                : 0;
            
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('finalWords').textContent = gameState.wordChain.length;
            document.getElementById('finalAvgSimilarity').textContent = avgSimilarity + 'ì ';
            document.getElementById('finalCombo').textContent = gameState.maxCombo;
            
            document.getElementById('gameOverModal').style.display = 'flex';
        }
        
        function newGame() {
            document.getElementById('gameOverModal').style.display = 'none';
            const timerBox = document.getElementById('timerBox');
            timerBox.classList.remove('warning');
            initGame();
        }
        
        function closeModal() {
            document.getElementById('gameOverModal').style.display = 'none';
        }
        
        // =============================================
        // ì´ˆê¸°í™”
        // =============================================
        
        document.addEventListener('DOMContentLoaded', () => {
            // Worker URL ì²´í¬
            if (WORKER_URL === 'https://your-worker.workers.dev') {
                alert('âš ï¸ Cloudflare Worker URLì„ ì„¤ì •í•´ì£¼ì„¸ìš”!\n\nconst WORKER_URL ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì„¸ìš”.');
            }
            
            // Enter í‚¤
            document.getElementById('wordInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !isProcessing) {
                    submitWord();
                }
            });
            
            initGame();
        });
    </script>
</body>
</html>
